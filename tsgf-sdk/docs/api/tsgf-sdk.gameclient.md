<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [tsgf-sdk](./tsgf-sdk.md) &gt; [GameClient](./tsgf-sdk.gameclient.md)

## GameClient class

基础的游戏服务器api的客户端封装

**Signature:**

```typescript
export declare class GameClient extends AWsClient<gameServiceType> 
```
**Extends:** [AWsClient](./tsgf-sdk.awsclient.md)<!-- -->&lt;[gameServiceType](./tsgf-sdk.gameservicetype.md)<!-- -->&gt;

## Constructors

<table><thead><tr><th>

Constructor


</th><th>

Modifiers


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[(constructor)(serverUrl, \_playerToken, reqTimeout, roomWaitReconnectTime)](./tsgf-sdk.gameclient._constructor_.md)


</td><td>


</td><td>

Constructs a new instance of the `GameClient` class


</td></tr>
</tbody></table>

## Properties

<table><thead><tr><th>

Property


</th><th>

Modifiers


</th><th>

Type


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[\_currPlayerInfo](./tsgf-sdk.gameclient._currplayerinfo.md)


</td><td>

`protected`


</td><td>

[IPlayerInfo](./tsgf-sdk.iplayerinfo.md) \| null


</td><td>


</td></tr>
<tr><td>

[\_currRoomInfo](./tsgf-sdk.gameclient._currroominfo.md)


</td><td>

`protected`


</td><td>

[IRoomInfo](./tsgf-sdk.iroominfo.md) \| null


</td><td>


</td></tr>
<tr><td>

[\_playerId](./tsgf-sdk.gameclient._playerid.md)


</td><td>

`protected`


</td><td>

string


</td><td>


</td></tr>
<tr><td>

[\_playerToken](./tsgf-sdk.gameclient._playertoken.md)


</td><td>

`protected`


</td><td>

string


</td><td>


</td></tr>
<tr><td>

[currPlayerInfo](./tsgf-sdk.gameclient.currplayerinfo.md)


</td><td>

`readonly`


</td><td>

[IPlayerInfo](./tsgf-sdk.iplayerinfo.md) \| null


</td><td>

当前玩家信息对象


</td></tr>
<tr><td>

[currRoomInfo](./tsgf-sdk.gameclient.currroominfo.md)


</td><td>


</td><td>

[IRoomInfo](./tsgf-sdk.iroominfo.md) \| null


</td><td>

当前所在的房间, 各种操作会自动维护本属性值为最新


</td></tr>
<tr><td>

[enabledReconnect](./tsgf-sdk.gameclient.enabledreconnect.md)


</td><td>


</td><td>

boolean


</td><td>

是否启用断线重连


</td></tr>
<tr><td>

[onChangeCustomPlayerProfile?](./tsgf-sdk.gameclient.onchangecustomplayerprofile.md)


</td><td>


</td><td>

(changeInfo: [IChangeCustomPlayerProfile](./tsgf-sdk.ichangecustomplayerprofile.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 【在房间中才能收到】有玩家修改了自定义属性(只要在房间,自己也会收到)


</td></tr>
<tr><td>

[onChangeCustomPlayerStatus?](./tsgf-sdk.gameclient.onchangecustomplayerstatus.md)


</td><td>


</td><td>

(changeInfo: [IChangeCustomPlayerStatus](./tsgf-sdk.ichangecustomplayerstatus.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 【在房间中才能收到】有玩家修改了自定义状态(只要在房间,自己也会收到)


</td></tr>
<tr><td>

[onChangePlayerNetworkState?](./tsgf-sdk.gameclient.onchangeplayernetworkstate.md)


</td><td>


</td><td>

(player: [IPlayerInfo](./tsgf-sdk.iplayerinfo.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 【在房间中才能收到】玩家加入当前房间（自己操作的不触发）


</td></tr>
<tr><td>

[onChangePlayerTeam?](./tsgf-sdk.gameclient.onchangeplayerteam.md)


</td><td>


</td><td>

(changeInfo: [IChangePlayerTeam](./tsgf-sdk.ichangeplayerteam.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 【在房间中才能收到】有玩家修改了所在队伍(只要在房间,自己也会收到)


</td></tr>
<tr><td>

[onChangeRoom?](./tsgf-sdk.gameclient.onchangeroom.md)


</td><td>


</td><td>

(roomInfo: [IRoomInfo](./tsgf-sdk.iroominfo.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 【在房间中才能收到】有玩家修改了自定义属性(只要在房间,自己也会收到)


</td></tr>
<tr><td>

[onDisconnected?](./tsgf-sdk.gameclient.ondisconnected.md)


</td><td>


</td><td>

(reason?: string) =&gt; void


</td><td>

_(Optional)_ 彻底断开触发, 如下情况: 1. 断开连接时没启用断线重连则触发 2. 主动断开时触发, reason='ManualDisconnect' 3. 断线重连失败并不再重连时触发, reason='ReconnectFailed' 4. 认证失败时会断开连接, 同时触发, reason='AuthorizeFailed'


</td></tr>
<tr><td>

[onDismissRoom?](./tsgf-sdk.gameclient.ondismissroom.md)


</td><td>


</td><td>

(roomInfo: [IRoomInfo](./tsgf-sdk.iroominfo.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 【在房间中才能收到】当前房间被解散（自己操作的不触发）


</td></tr>
<tr><td>

[onJoinRoom?](./tsgf-sdk.gameclient.onjoinroom.md)


</td><td>


</td><td>

(roomInfo: [IRoomInfo](./tsgf-sdk.iroominfo.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 当前玩家加入到房间后触发


</td></tr>
<tr><td>

[onKicked?](./tsgf-sdk.gameclient.onkicked.md)


</td><td>


</td><td>

(roomInfo: [IRoomInfo](./tsgf-sdk.iroominfo.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 【在房间中才能收到】玩家被踢出房间


</td></tr>
<tr><td>

[onLeaveRoom?](./tsgf-sdk.gameclient.onleaveroom.md)


</td><td>


</td><td>

(roomInfo: [IRoomInfo](./tsgf-sdk.iroominfo.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 当前玩家不管什么原因离开了房间都会触发(主动离开,主动解散,房间被解散等等)


</td></tr>
<tr><td>

[onPlayerJoinRoom?](./tsgf-sdk.gameclient.onplayerjoinroom.md)


</td><td>


</td><td>

(player: [IPlayerInfo](./tsgf-sdk.iplayerinfo.md)<!-- -->, roomInfo: [IRoomInfo](./tsgf-sdk.iroominfo.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 【在房间中才能收到】玩家加入当前房间（自己操作的不触发）


</td></tr>
<tr><td>

[onPlayerLeaveRoom?](./tsgf-sdk.gameclient.onplayerleaveroom.md)


</td><td>


</td><td>

(player: [IPlayerInfo](./tsgf-sdk.iplayerinfo.md)<!-- -->, roomInfo: [IRoomInfo](./tsgf-sdk.iroominfo.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 【在房间中才能收到】玩家退出当前房间（自己操作的不触发）


</td></tr>
<tr><td>

[onReconnectResult?](./tsgf-sdk.gameclient.onreconnectresult.md)


</td><td>


</td><td>

(succ: boolean, err: string \| null) =&gt; void


</td><td>

_(Optional)_ 断线重连最终有结果时触发(终于连上了,或者返回不继续尝试了)


</td></tr>
<tr><td>

[onReconnectStart?](./tsgf-sdk.gameclient.onreconnectstart.md)


</td><td>


</td><td>

(currTryCount: number) =&gt; void


</td><td>

_(Optional)_ \[需启用断线重连:enabledReconnect\]每次开始断线重连时触发, \[reconnectWaitSec\]秒后开始重连


</td></tr>
<tr><td>

[onRecvFrame?](./tsgf-sdk.gameclient.onrecvframe.md)


</td><td>


</td><td>

(syncFrame: [IGameSyncFrame](./tsgf-sdk.igamesyncframe.md)<!-- -->, dt: number) =&gt; void


</td><td>

_(Optional)_ 【在房间中才能收到】房间中收到一个同步帧


</td></tr>
<tr><td>

[onRecvRoomMsg?](./tsgf-sdk.gameclient.onrecvroommsg.md)


</td><td>


</td><td>

(roomMsg: [IRecvRoomMsg](./tsgf-sdk.irecvroommsg.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 当接收到房间消息时触发


</td></tr>
<tr><td>

[onRequirePlayerSyncState?](./tsgf-sdk.gameclient.onrequireplayersyncstate.md)


</td><td>


</td><td>

() =&gt; void


</td><td>

_(Optional)_ 【在房间中才能收到】服务端要求玩家上传状态同步数据 (调用 playerSendSyncState 方法)


</td></tr>
<tr><td>

[onRoomAllPlayersMatchResult?](./tsgf-sdk.gameclient.onroomallplayersmatchresult.md)


</td><td>


</td><td>

(errMsg?: string, errCode?: [ErrorCodes](./tsgf-sdk.errorcodes.md)<!-- -->, matchResult?: [IMatchPlayerResultWithServer](./tsgf-sdk.imatchplayerresultwithserver.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 【在房间中才能收到】全房间玩家匹配有结果了(自己也会收到)


</td></tr>
<tr><td>

[onRoomAllPlayersMatchStart?](./tsgf-sdk.gameclient.onroomallplayersmatchstart.md)


</td><td>


</td><td>

(matchReqId: string, req\_playerId: string, matchParams: [IMatchParamsFromRoomAllPlayer](./tsgf-sdk.imatchparamsfromroomallplayer.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 【在房间中才能收到】有玩家发起了全房间玩家匹配(自己也会收到)


</td></tr>
<tr><td>

[onStartFrameSync?](./tsgf-sdk.gameclient.onstartframesync.md)


</td><td>


</td><td>

(roomInfo: [IRoomInfo](./tsgf-sdk.iroominfo.md)<!-- -->, startPlayer: [IPlayerInfo](./tsgf-sdk.iplayerinfo.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 【在房间中才能收到】房间中开始帧同步了


</td></tr>
<tr><td>

[onStopFrameSync?](./tsgf-sdk.gameclient.onstopframesync.md)


</td><td>


</td><td>

(roomInfo: [IRoomInfo](./tsgf-sdk.iroominfo.md)<!-- -->, stopPlayer: [IPlayerInfo](./tsgf-sdk.iplayerinfo.md)<!-- -->) =&gt; void


</td><td>

_(Optional)_ 【在房间中才能收到】房间中停止帧同步了


</td></tr>
<tr><td>

[playerId](./tsgf-sdk.gameclient.playerid.md)


</td><td>

`readonly`


</td><td>

string


</td><td>


</td></tr>
<tr><td>

[playerToken](./tsgf-sdk.gameclient.playertoken.md)


</td><td>

`readonly`


</td><td>

string


</td><td>


</td></tr>
<tr><td>

[reconnectTimerHD](./tsgf-sdk.gameclient.reconnecttimerhd.md)


</td><td>

`protected`


</td><td>

any


</td><td>


</td></tr>
<tr><td>

[reconnectWaitSec](./tsgf-sdk.gameclient.reconnectwaitsec.md)


</td><td>


</td><td>

number


</td><td>

断线重连等待秒数


</td></tr>
<tr><td>

[roomWaitReconnectTime?](./tsgf-sdk.gameclient.roomwaitreconnecttime.md)


</td><td>


</td><td>

number


</td><td>

_(Optional)_ 可设置房间中断线后等待重连的毫秒数(认证和重连时使用),默认为60000ms(60秒),设成0表示断线后直接清理(按退出房间处理)不等待重连


</td></tr>
</tbody></table>

## Methods

<table><thead><tr><th>

Method


</th><th>

Modifiers


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[authorize(infoPara)](./tsgf-sdk.gameclient.authorize.md)


</td><td>


</td><td>

登录到游戏服务器, 失败则断开连接并清理数据


</td></tr>
<tr><td>

[cancelMatch()](./tsgf-sdk.gameclient.cancelmatch.md)


</td><td>


</td><td>

取消匹配请求 可能发生并发,导致虽然请求成功了,但还是收到了成功结果的通知


</td></tr>
<tr><td>

[changeCustomPlayerProfile(customPlayerProfile, robotPlayerId)](./tsgf-sdk.gameclient.changecustomplayerprofile.md)


</td><td>


</td><td>

修改自己的玩家自定义属性,如果当前在房间中会同时会触发通知(房间中所有玩家)


</td></tr>
<tr><td>

[changeCustomPlayerStatus(customPlayerStatus, robotPlayerId)](./tsgf-sdk.gameclient.changecustomplayerstatus.md)


</td><td>


</td><td>

修改自己的玩家自定义状态,如果当前在房间中会同时会触发通知(房间中所有玩家)


</td></tr>
<tr><td>

[changePlayerTeam(newTeamId, robotPlayerId)](./tsgf-sdk.gameclient.changeplayerteam.md)


</td><td>


</td><td>

变更自己所在队伍


</td></tr>
<tr><td>

[changeRoom(changePara)](./tsgf-sdk.gameclient.changeroom.md)


</td><td>


</td><td>

修改房间信息(注意,只能房主操作),同时同步更新本地当前房间信息


</td></tr>
<tr><td>

[clearData()](./tsgf-sdk.gameclient.cleardata.md)


</td><td>

`protected`


</td><td>


</td></tr>
<tr><td>

[createRoomRobot(createPa, teamId)](./tsgf-sdk.gameclient.createroomrobot.md)


</td><td>


</td><td>

玩家创建房间机器人(退出房间会同步退出)


</td></tr>
<tr><td>

[disconnect(reason)](./tsgf-sdk.gameclient.disconnect.md)


</td><td>


</td><td>

Disconnects game client


</td></tr>
<tr><td>

[dismissRoom()](./tsgf-sdk.gameclient.dismissroom.md)


</td><td>


</td><td>

【仅房主】解散当前房间


</td></tr>
<tr><td>

[joinRoom(roomId, teamId)](./tsgf-sdk.gameclient.joinroom.md)


</td><td>


</td><td>

\[兼容旧版本保留\]进房间


</td></tr>
<tr><td>

[joinRoom(joinRoomPara)](./tsgf-sdk.gameclient.joinroom_1.md)


</td><td>


</td><td>

进房间


</td></tr>
<tr><td>

[kickPlayer(playerId)](./tsgf-sdk.gameclient.kickplayer.md)


</td><td>


</td><td>

【仅房主】踢出房间内玩家


</td></tr>
<tr><td>

[leaveRoom()](./tsgf-sdk.gameclient.leaveroom.md)


</td><td>


</td><td>

退出当前房间


</td></tr>
<tr><td>

[playerInpFrame(inpOperates, robotPlayerId)](./tsgf-sdk.gameclient.playerinpframe.md)


</td><td>


</td><td>

发送玩家输入帧(加入到下一帧的操作列表)


</td></tr>
<tr><td>

[playerSendSyncState(stateData, stateFrameIndex)](./tsgf-sdk.gameclient.playersendsyncstate.md)


</td><td>


</td><td>

玩家发送本地的同步状态数据(有启用状态同步的时候才可以用)


</td></tr>
<tr><td>

[queryMatch()](./tsgf-sdk.gameclient.querymatch.md)


</td><td>


</td><td>

查询完整匹配结果 会等到有结果了才返回! 注意: 同时只能只有一个玩家进行查询等待,一般使用通知来获取结果即可


</td></tr>
<tr><td>

[reconnect()](./tsgf-sdk.gameclient.reconnect.md)


</td><td>


</td><td>

断线重连, 失败的话要看code, ErrorCodes.AuthReconnectionFail 表示逻辑拒绝,不需要重连


</td></tr>
<tr><td>

[requestAfterFrames()](./tsgf-sdk.gameclient.requestafterframes.md)


</td><td>


</td><td>

请求追帧数据(当前的所有帧数据\[+同步状态数据\])


</td></tr>
<tr><td>

[requestFrames(beginFrameIndex, endFrameIndex)](./tsgf-sdk.gameclient.requestframes.md)


</td><td>


</td><td>

自主请求帧数组


</td></tr>
<tr><td>

[requestMatch(matchParams)](./tsgf-sdk.gameclient.requestmatch.md)


</td><td>


</td><td>

发起房间所有玩家匹配请求 请求成功即返回,同时房间中的所有玩家会收到通知 匹配有结果了还会收到消息通知, 并且可由一个玩家调用QueryMatch等待完整匹配结果


</td></tr>
<tr><td>

[roomRobotLeave(robotPlayerId)](./tsgf-sdk.gameclient.roomrobotleave.md)


</td><td>


</td><td>

玩家的指定房间机器人退出房间(即销毁)


</td></tr>
<tr><td>

[sendRoomMsg(roomMsg, robotPlayerId)](./tsgf-sdk.gameclient.sendroommsg.md)


</td><td>


</td><td>

发送房间消息（自定义消息），可以指定房间里的全部玩家或部分玩家或其他玩家


</td></tr>
<tr><td>

[startFrameSync()](./tsgf-sdk.gameclient.startframesync.md)


</td><td>


</td><td>

开始帧同步


</td></tr>
<tr><td>

[startReconnect(currTryCount, failReTry)](./tsgf-sdk.gameclient.startreconnect.md)


</td><td>

`protected`


</td><td>

Starts reconnect


</td></tr>
<tr><td>

[stopFrameSync()](./tsgf-sdk.gameclient.stopframesync.md)


</td><td>


</td><td>

停止帧同步


</td></tr>
<tr><td>

[stopReconnect()](./tsgf-sdk.gameclient.stopreconnect.md)


</td><td>

`protected`


</td><td>


</td></tr>
</tbody></table>
